<%- include("header"); %>

<h1>Pattern API documentation</h1>

<h2>API key</h2>

<p>An API key will be required for all requests.</p>

<p>Required headers:</p>

<pre>x-access-token: [YOUR_API_KEY]</pre>

<p>If an API key is not provided the following error is given:</p>

<pre>
{
    "message": "Auth failed"
}
</pre>

<h2>users</h2>

<p>A user has the following attributes:</p>

<pre>
_id
firstname
lastname
email
password
phone
city
payment_method
card_information
balance
account_status
</pre>

<h2>admins</h2>

<p>An admin has the following attributes:</p>

<pre>
_id
username
password
</pre>

<h2>cities</h2>

<p>A city has the following attributes:</p>

<pre>
_id
name
coordinates
charge_stations
parking_stations
</pre>

<h2>parking_stations and charge_stations</h2>

<p>A station has the following attributes:</p>

<pre>
_id
name
coordinates
</pre>

<h2>bikes</h2>

<p>A bike has the following attributes:</p>

<pre>
_id
city_id
charge_id
parking_id
bike_status
battery_status
coordinates
maintenance
latest_trip
</pre>

<h2>trips</h2>

<p>A trip has the following attributes:</p>

<pre>
_id
user_id
bike_id
start_time
start_coordinates
average_speed
distance
price
stop_time
stop_coordinates
</pre>

<h2>prices</h2>

<p>A price has the following attributes:</p>

<pre>
_id
starting_fee
price_per_minute
penalty_fee
discount
</pre>

<h2>api_users</h2>

<p>An api_user has the following attributes:</p>

<pre>
_id
email
api_key
</pre>

<h2>To get all users:</h2>

<pre>GET /v1/users</pre>

<p>Result:</p>

<pre>
{
    "count": 2,
    "users": [
        {
            "_id": "619f6ee3d0b6c914a2b58514",
            "firstname": "John",
            "lastname": "Doe",
            "email": "john@exampple.com",
            "password": "password",
            "city": "61a76026bb53f131584de9b1",
            "phone": "+4412345678",
            "payment_method": "refill",
            "card_information": "unknown",
            "balance": 0,
            "account_status": "active"
        },
        {
            "_id": "619f767f6736ee4a118b900a",
            "firstname": "Jane",
            "lastname": "Doe",
            "email": "jane@example.com",
            "password": "pass",
            "city": "61a76026bb53f131584de9b1",
            "phone": "+4412345679",
            "payment_method": "refill",
            "card_information": "unknown",
            "balance": 99.99,
            "account_status": "deleted"
        }
    ]
}
</pre>


<h2>To get user by id:</h2>

<pre>GET /v1/users/:user_id</pre>

<p>Result:</p>

<pre>
{
    "user": {
        "_id": "619f6ee3d0b6c914a2b58514",
        "firstname": "John",
        "lastname": "Doe",
        "email": "john@exampple.com",
        "password": "password",
        "city": "61a76026bb53f131584de9b1",
        "phone": "+4412345678",
        "payment_method": "refill",
        "card_information": "unknown",
        "balance": 0,
        "account_status": "active"
    }
}
</pre>


<h2>To update a user by id:</h2>

<pre>PATCH /v1/users/:user_id</pre>

<p>Example:</p>

<pre>[
    {"propName": "payment_method", "value": "monthly"}
]</pre>

<p>Result:</p>

<pre>
{
    "message": "User succesfully updated",
    "updatedUser": {
        "_id": "619f6ee3d0b6c914a2b58514",
        "firstname": "John",
        "lastname": "Doe",
        "email": "john@exampple.com",
        "password": "password",
        "city": "61a76026bb53f131584de9b1"
        "phone": "+4412345678",
        "payment_method": "refill",
        "card_information": "unknown",
        "balance": 0,
        "account_status": "active"
    }
}
</pre>

<h2>Register a user:</h2>

<pre>POST /v1/users/register</pre>

<p>Required parameters:</p>

<pre>
firstname
lastname
email
</pre>

<p>Optional parameters:</p>

<pre>
password
phone
city
payment_method
card_information
balance
account_status
</pre>

<p>Result:</p>

<pre>
{
    "message": "User succesfully updated",
    "updatedUser": {
        "_id": "619f6ee3d0b6c914a2b58514",
        "firstname": "John",
        "lastname": "Doe",
        "email": "john@exampple.com",
        "password": "password",
        "city": "61a76026bb53f131584de9b1"
        "phone": "+4412345678",
        "payment_method": "refill",
        "card_information": "unknown",
        "balance": 0,
        "account_status": "active"
    }
}
</pre>


<%- include("footer"); %>